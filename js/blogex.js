function checkOpen(){}function coverColor(){var path=document.getElementById("post-cover")?.src,httpRequest;void 0!==path?(httpRequest=new XMLHttpRequest,httpRequest.open("GET",path+"?imageAve",!0),httpRequest.send(),httpRequest.onreadystatechange=function(){var json,obj,value,value;4==httpRequest.readyState&&200==httpRequest.status&&(json=httpRequest.responseText,obj=eval("("+json+")"),value=obj.RGB,value="#"+value.slice(2),"light"==getContrastYIQ(value)&&(value=LightenDarkenColor(colorHex(value),-40)),document.styleSheets[0].addRule(":root","--heo-main:"+value+"!important"),document.styleSheets[0].addRule(":root","--heo-main-op:"+value+"23!important"),document.styleSheets[0].addRule(":root","--heo-main-op-deep:"+value+"dd!important"),document.styleSheets[0].addRule(":root","--heo-main-none:"+value+"00!important"),heo.initThemeColor(),document.getElementById("coverdiv").classList.add("loaded"))}):(document.styleSheets[0].addRule(":root","--heo-main: var(--heo-theme)!important"),document.styleSheets[0].addRule(":root","--heo-main-op: var(--heo-theme-op)!important"),document.styleSheets[0].addRule(":root","--heo-main-op-deep:var(--heo-theme-op-deep)!important"),document.styleSheets[0].addRule(":root","--heo-main-none: var(--heo-theme-none)!important"),heo.initThemeColor())}function colorHex(e){if(/^(rgb|RGB)/.test(e)){for(var t=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",n=0;n<t.length;n++){var a=Number(t[n]).toString(16);"0"===a&&(a+=a),o+=a}return o=7!==o.length?e:o}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;var i=e.replace(/#/,"").split("");if(6===i.length)return e;if(3===i.length){for(var r="#",n=0;n<i.length;n+=1)r+=i[n]+i[n];return r}}function colorRgb(e){var t=e.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var o="#",n=1;n<4;n+=1)o+=t.slice(n,n+1).concat(t.slice(n,n+1));t=o}for(var a=[],n=1;n<7;n+=2)a.push(parseInt("0x"+t.slice(n,n+2)));return"rgb("+a.join(",")+")"}return t}function LightenDarkenColor(e,t){var o=!1,e=("#"==e[0]&&(e=e.slice(1),o=!0),parseInt(e,16)),n=(e>>16)+t,a=(255<n?n=255:n<0&&(n=0),(e>>8&255)+t),e=(255<a?a=255:a<0&&(a=0),(255&e)+t);return 255<e?e=255:e<0&&(e=0),(o?"#":"")+String("000000"+(e|a<<8|n<<16).toString(16)).slice(-6)}function getContrastYIQ(e){e=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=299*e[1]+587*e[2]+114*e[3];return.5<=(e/=255e3)?"light":"dark"}function navTitle(){var e=document.title.replace(" | 张洪Heo","");document.getElementById("page-name-text").innerHTML=e}function showcopy(){if(void 0!==GLOBAL_CONFIG.Snackbar)btf.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=ctx.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout(()=>{e.style.opacity=0},700)}}checkOpen.toString=function(){this.opened=!0},window.onload=function(){for(var e=document.getElementsByClassName("copybtn"),t=0;t<e.length;t++)document.getElementsByClassName("copybtn")[t].addEventListener("click",function(){showcopy()});heo.initThemeColor()};var getTimeState=()=>{var e=(new Date).getHours(),t="";return 0<=e&&e<=5?t="晚安":5<e&&e<=10?t="早上好":10<e&&e<=14?t="中午好":14<e&&e<=18?t="下午好":18<e&&e<=24&&(t="晚上好"),t};function fly_to_top(){document.getElementById("guli_top").classList.add("open_wing"),setTimeout(function(){document.getElementById("guli_top").classList.add("flying"),btf.scrollToDest(0,300)},300),setTimeout(function(){document.getElementById("guli_top").classList.remove("flying"),document.getElementById("guli_top").classList.remove("open_wing"),document.getElementById("guli_top").style.cssText="opacity: ''; transform: ''"},600)}var navFn={switchDarkMode:()=>{"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night,!1,2e3)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day,!1,2e3)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout(()=>window.disqusReset(),200);var e,t="light"===document.documentElement.getAttribute("data-theme")?"#363636":"#F7F7FA";document.getElementById("posts-chart")&&((e=postsOption).textStyle.color=t,e.title.textStyle.color=t,e.xAxis.axisLine.lineStyle.color=t,e.yAxis.axisLine.lineStyle.color=t,postsChart.setOption(e)),document.getElementById("tags-chart")&&((e=tagsOption).textStyle.color=t,e.title.textStyle.color=t,e.xAxis.axisLine.lineStyle.color=t,e.yAxis.axisLine.lineStyle.color=t,tagsChart.setOption(e)),document.getElementById("categories-chart")&&((e=categoriesOption).textStyle.color=t,e.title.textStyle.color=t,e.legend.textStyle.color=t,categoriesChart.setOption(e))}};function RemoveRewardMask(){$(".reward-main").attr("style","display: none"),$("#quit-box").attr("style","display: none")}function AddRewardMask(){$(".reward-main").attr("style","display: flex")}function travelling(){fetch("https://moments.zhheo.com/randomfriend").then(e=>e.json()).then(e=>{var t=e.name,o=e.link,e="点击前往按钮进入随机一个友链，不保证跳转网站的安全性和可用性。本次随机到的是本站友链：「"+t+"」";document.styleSheets[0].addRule(":root","--heo-snackbar-time:8000ms!important"),Snackbar.show({text:e,duration:8e3,pos:"top-center",actionText:"前往",onActionClick:function(e){$(e).css("opacity",0),window.open(o,"_blank")}})})}function toforeverblog(){Snackbar.show({text:"点击前往按钮进入「十年之约」项目中的成员博客，不保证跳转网站的安全性和可用性",duration:8e3,pos:"top-center",actionText:"前往",onActionClick:function(e){$(e).css("opacity",0),window.open(link,"https://www.foreverblog.cn/go.html")}})}function totraveling(){btf.snackbarShow("即将跳转到「开往」项目的成员博客，不保证跳转网站的安全性和可用性",!1,5e3),setTimeout(function(){window.open("https://www.travellings.cn/go.html")},"5000")}function removeLoading(){setTimeout(function(){preloader.endLoading()},3e3)}function addFriendLink(){var e=document.getElementsByClassName("el-textarea__inner")[0],t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.value="昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n",e.dispatchEvent(t),heo.scrollTo("#post-comment"),e.focus(),e.setSelectionRange(-1,-1)}function getArrayItems(e,t){var o,n=new Array;for(o in e)n.push(e[o]);for(var a=new Array,i=0;i<t&&0<n.length;i++){var r=Math.floor(Math.random()*n.length);a[i]=n[r],n.splice(r,1)}return a}function owoBig(){document.getElementById("post-comment").addEventListener("DOMNodeInserted",e=>{if(e.target.classList&&"OwO-body"==e.target.classList.value){e=e.target;if(e){let t="",o=!0,i=document.createElement("div");i.id="owo-big",document.querySelector("body").appendChild(i),e.addEventListener("contextmenu",e=>e.preventDefault()),e.addEventListener("mouseover",a=>{"LI"==a.target.tagName&&o&&(o=!1,t=setTimeout(()=>{var e=3*a.path[0].clientHeight,t=3*a.path[0].clientWidth,o=a.x-a.offsetX-(t-a.path[0].clientWidth)/2,n=a.y-a.offsetY;i.style.height=e+"px",i.style.width=t+"px",i.style.left=o+"px",i.style.top=n+"px",i.style.display="flex",i.innerHTML=`<img src="${a.target.querySelector("img").src}">`},300))}),e.addEventListener("mouseout",e=>{i.style.display="none",o=!0,clearTimeout(t)})}}})}document.addEventListener("touchstart",e=>{RemoveRewardMask()},!1),$(document).unbind("keydown").bind("keydown",function(e){if((e.ctrlKey||e.metaKey)&&67==e.keyCode&&""!=selectTextNow)return btf.snackbarShow("复制成功，复制和转载请标注本文地址"),rm.rightmenuCopyText(selectTextNow),!1}),document.addEventListener("scroll",btf.throttle(function(){heo.initThemeColor()},200)),navigator.serviceWorker.getRegistrations().then(function(e){for(var t of e)t.unregister()}),window.onkeydown=function(e){123===e.keyCode&&btf.snackbarShow("开发者模式已打开，请遵循GPL协议",!1,3e3)},window.addEventListener("resize",function(){document.querySelector("#waterfall")&&heo.reflashEssayWaterFall()}),$(".topGroup").hover(function(){},function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}),document.getElementById("post-comment")&&owoBig(),document.addEventListener("scroll",btf.throttle(function(){var e=window.scrollY+document.documentElement.clientHeight,t=(window.scrollY,document.getElementById("pagination")),o=document.getElementById("post-tools");o&&t&&(o=o.offsetTop+o.offsetHeight/2,1300<document.body.clientWidth)&&(o<e?t.classList.add("show-window"):t.classList.remove("show-window"))},200)),document.addEventListener("pjax:send",function(){console.clear(),Pace.restart(),heo.showLoading(),$(window).prop("keydown",null).off("keydown")}),document.addEventListener("pjax:complete",function(){coverColor(),addRightMenuClickEvent(),navTitle(),percent(),heo.topPostScroll(),heo.topCategoriesBarScroll(),heo.sayhi(),heo.addTag(),heo.stopImgRightDrag(),heo.addFriendLinksInFooter(),heo.qrcodeCreate(),heo.hidecookie(),heo.onlyHome(),heo.addNavBackgroundInit(),heo.initIndexEssay(),heo.changeTimeInEssay(),heo.reflashEssayWaterFall(),heo.addMediumInEssay(),heo.darkModeStatus(),heo.categoriesBarActive(),heo.initThemeColor(),heo.hideLoading(),heo.tagPageActive(),heo.removeBodyPaceClass()});