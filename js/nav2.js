function percent(){var e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#percent"),d=window.scrollY+document.documentElement.clientHeight,c=document.getElementById("post-tools")||document.getElementById("footer");c.offsetTop+c.offsetHeight/2<d||90<n?(document.querySelector("#nav-totop").classList.add("long"),o.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),0<=n&&(o.innerHTML=n)),(endresult=t-e)<100?$(".needEndHide").addClass("hide"):$(".needEndHide").removeClass("hide"),window.onscroll=percent}percent(),document.addEventListener("pjax:complete",percent);